# iTerm2 auto start tmux:
# In the preferences for iTerm2, select the 'Profiles' tab, and then the 'General'
# pane for your default profile. In the 'Command' section of the 'General' pane
# locate the 'Send text at start:' setting. Put this command in,
# substituting your session name for base.

# tmux attach -t local || tmux new -s local

################################################
# set leader
unbind C-b
set -g prefix C-a
bind C-a send-prefix
# Start numbering at 1
set -g base-index 1

# Activity monitoring
# setw -g monitor-activity on
# set -g visual-activity on

# hate that default green bar
set -g status-bg black
# clashes with solarized: not black actually
set -g status-fg cyan
#
# splitting panes, create windows
bind v split-window -h -c '#{pane_current_path}'
bind s split-window -v -c '#{pane_current_path}'
bind c new-window -c '#{pane_current_path}'

# moving between panes
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

set-option -g default-shell /bin/zsh
if -b 'command -v reattach-to-user-namespace > /dev/null 2>&1' 'bind y run "tmux save-buffer - | reattach-to-user-namespace pbcopy"'

bind Enter copy-mode # enter copy mode
bind b list-buffers  # list paster buffers
bind p paste-buffer  # paste from the top pate buffer
bind P choose-buffer # choose which buffer to paste from

run -b 'tmux bind -T copy-mode-vi v send -X begin-selection 2> /dev/null || true'
run -b 'tmux bind -T copy-mode-vi y send -X copy-selection 2> /dev/null || true'

set -sg escape-time 0
set -g history-limit 99999

# sane scrolling
set -g terminal-overrides 'xterm*:smcup@:rmcup@'

setw -g focus-events on

set -g default-terminal "screen-256color"

set-option -g display-time 3000

if-shell 'test "$(uname)" = "Darwin"' 'set-option -g default-command "shell > /dev/null 2>&1; reattach-to-user-namespace -l zsh"'

new-session